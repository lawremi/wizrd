<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Chat Pipelines — pipelines • wizrd</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Chat Pipelines — pipelines"><meta property="og:description" content="Agent and Chat objects can be combined into ChatPipeline objects using
  c. Chatting to a pipeline, via chat, sends the
  input to the first element of the pipeline. The output from that
  element is sent to the second, and so on, and the output from the
  final element is concatenated to the returned Chat object, which only
  contains the initial input and the final output, along with any
  previous exchanges. Since a ChatPipeline can be embedded into a Chat
  context, it is possible to nest pipelines, forming a tree."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">wizrd</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/wizrd.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/lawremi/wizrd" class="external-link">
    <span class="fa fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Chat Pipelines</h1>

    <div class="hidden name"><code>pipelines.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Agent and Chat objects can be combined into ChatPipeline objects using
  <code>c</code>. Chatting to a pipeline, via <code><a href="chat.html">chat</a></code>, sends the
  input to the first element of the pipeline. The output from that
  element is sent to the second, and so on, and the output from the
  final element is concatenated to the returned Chat object, which only
  contains the initial input and the final output, along with any
  previous exchanges. Since a ChatPipeline can be embedded into a Chat
  context, it is possible to nest pipelines, forming a tree.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'Agent'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for class 'Chat'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for class 'ChatPipeline'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <p></p>
<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Agent, Chat or ChatPipeline objects to combine. If an Agent, no
    context is preserved in the return value of <code>chat</code>, so every
    interaction happens is a transient, single exchange. If a Chat
    object, the context is preserved over calls to <code>chat</code>, so every
    interaction is recorded and can affect future iterations.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Programming agentic systems requires complex control flow. In a pure
  agentic system, the agents control the flow of computation, where
  agents call other agents, contextualizing requests as
  appropriate. Hybrid approaches, combining agentic and conventional
  logic, can be more appropriate, trading flexibility for
  predictability. In the general case, the conventional flow is probably
  best implemented directly as code, rather than through formalisms like
  sequential pipelines.</p>
<p>However, formal structures like ChatPipeline provide a convenient
  abstraction, in that they can be invoked via <code><a href="chat.html">chat</a></code>, just
  like an individual agent. Another convenience is the management of
  context at each point in the pipeline.</p>
<p>It is not clear whether formal chaining of agents and/or chat contexts
  will remain relevant as best practices evolve.  Thus, please regard
  this functionality as provisional and subject to change or even removal.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Experimental and subject to change; see details.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    <p>ChatPipeline object, for use with <code><a href="chat.html">chat</a></code>.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Michael Lawrence</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>    <span class="va">pipeline</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        adder <span class="op">=</span> <span class="fu"><a href="convenience-models.html">llama</a></span><span class="op">(</span><span class="va">server</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="instruct.html">instruct</a></span><span class="op">(</span><span class="st">"Return a single number"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        namer <span class="op">=</span> <span class="fu"><a href="convenience-models.html">llama</a></span><span class="op">(</span><span class="va">server</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="instruct.html">instruct</a></span><span class="op">(</span><span class="st">"Return only the name of the number"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">pipeline</span>, <span class="st">"1 + 1"</span><span class="op">)</span> <span class="co"># "Two"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">pipeline</span><span class="op">$</span><span class="va">namer</span> <span class="op">&lt;-</span> <span class="fu"><a href="chat.html">chat</a></span><span class="op">(</span><span class="va">pipeline</span><span class="op">$</span><span class="va">namer</span><span class="op">)</span> <span class="co"># now it preserves context</span></span></span>
<span class="r-in"><span>    <span class="va">cht</span> <span class="op">&lt;-</span> <span class="fu"><a href="chat.html">chat</a></span><span class="op">(</span><span class="va">pipeline</span>, <span class="st">"1 + 1"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="last_output.html">last_output</a></span><span class="op">(</span><span class="va">cht</span><span class="op">@</span><span class="va">model</span><span class="op">$</span><span class="va">namer</span><span class="op">)</span> <span class="co"># which we can access</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael Lawrence.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

